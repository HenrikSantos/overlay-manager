<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <title>Overlay Manager</title>
    <style>
        :root {
            --primary-color: #2563eb;
            --bg-color: #f8fafc;
            --text-color: #1e293b;
            --border-color: #e2e8f0;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            padding: 2rem;
            line-height: 1.5;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        h1 {
            font-size: 1.5rem;
            font-weight: 600;
        }

        #language-toggle {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 0.375rem;
            cursor: pointer;
            font-size: 0.875rem;
            transition: opacity 0.2s;
        }

        #language-toggle:hover {
            opacity: 0.9;
        }

        button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 0.375rem;
            cursor: pointer;
            font-size: 0.875rem;
            transition: opacity 0.2s;
        }

        button:hover {
            opacity: 0.9;
        }

        #overlays-list {
            margin-top: 1.5rem;
            display: grid;
            gap: 1rem;
        }

        .overlay-config {
            background-color: white;
            padding: 1.5rem;
            border-radius: 0.5rem;
            border: 1px solid var(--border-color);
        }

        .overlay-config h2 {
            font-size: 1.25rem;
            margin-bottom: 1rem;
        }

        .form-group {
            display: grid;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .input-group {
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
        }

        .coordinate-pair {
            display: flex;
            gap: 1rem;
        }

        .coordinate-pair .input-group {
            flex: 1;
        }

        label {
            font-size: 0.875rem;
            font-weight: 500;
        }

        input[type="text"],
        input[type="number"] {
            padding: 0.5rem;
            border: 1px solid var(--border-color);
            border-radius: 0.375rem;
            font-size: 0.875rem;
        }

        .controls {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .remove-btn {
            background-color: #dc2626;
        }

        .interactive-toggle {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-top: 0.5rem;
        }
    </style>
</head>

<body>
    <div class="header">
        <h1 id="page-title">Overlay Manager</h1>
        <button id="language-toggle" onclick="toggleLanguage()">EN</button>
    </div>
    <button id="create-overlay">Adicionar Overlay</button>
    <div id="overlays-list"></div>

    <script>
        const { ipcRenderer } = require('electron');

        const translations = {
            en: {
                title: "Overlay Manager",
                addOverlay: "Add Overlay",
                positionX: "Position X",
                positionY: "Position Y",
                width: "Width",
                height: "Height",
                url: "URL",
                apply: "Apply",
                remove: "Remove",
                interactive: "Interactive",
                transparency: "Transparency",
            },
            pt: {
                title: "Gerenciador de Overlays",
                addOverlay: "Adicionar Overlay",
                positionX: "Posição X",
                positionY: "Posição Y",
                width: "Largura",
                height: "Altura",
                url: "URL",
                apply: "Aplicar",
                remove: "Remover",
                interactive: "Interativo",
                transparency: "Transparência",
            },
        };

        let currentLanguage = "en";

        const overlayTemplate = ({ index, x, y, width, height, url }) => `
            <div class="overlay-config">
                <h2>Overlay ${index + 1}</h2>
                <div class="form-group">
                    <div class="input-group">
                        <label for="url-${index}">${translations[currentLanguage].url}</label>
                        <input type="text" id="url-${index}" value="${url}">
                    </div>
                    <div class="coordinate-pair">
                        <div class="input-group">
                            <label for="x-${index}">${translations[currentLanguage].positionX}</label>
                            <input type="number" id="x-${index}" value="${x}">
                        </div>
                        <div class="input-group">
                            <label for="y-${index}">${translations[currentLanguage].positionY}</label>
                            <input type="number" id="y-${index}" value="${y}">
                        </div>
                    </div>
                    <div class="coordinate-pair">
                        <div class="input-group">
                            <label for="width-${index}">${translations[currentLanguage].width}</label>
                            <input type="number" id="width-${index}" value="${width}">
                        </div>
                        <div class="input-group">
                            <label for="height-${index}">${translations[currentLanguage].height}</label>
                            <input type="number" id="height-${index}" value="${height}">
                        </div>
                    </div>
                    <div class="input-group">
                        <label for="opacity-${index}">${translations[currentLanguage].transparency}</label>
                        <input type="range" id="opacity-${index}" min="0" max="100" value="100" oninput="updateOpacity(${index}, this.value)">
                    </div>

                </div>
                <div class="controls">
                    <button onclick="updateOverlay(${index})">${translations[currentLanguage].apply}</button>
                    <button class="remove-btn" onclick="removeOverlay(${index})">${translations[currentLanguage].remove}</button>
                </div>
                <div class="interactive-toggle">
                    <input type="checkbox" id="interactive-${index}" onchange="toggleInteractivity(${index}, this.checked)">
                    <label for="interactive-${index}">${translations[currentLanguage].interactive}</label>
                </div>
            </div>
        `;

        document.getElementById('create-overlay').addEventListener('click', () => {
            ipcRenderer.send('create-overlay', { x: 100, y: 100, width: 800, height: 600, url: '' });
        });

        ipcRenderer.on('update-overlays', (_, overlays) => {
            const overlaysList = document.getElementById('overlays-list');
            overlaysList.innerHTML = overlays.map(overlayTemplate).join('');
        });

        ipcRenderer.on('sync-overlay-bounds', (_, { index, x, y, width, height }) => {
            document.getElementById(`x-${index}`).value = x;
            document.getElementById(`y-${index}`).value = y;
            document.getElementById(`width-${index}`).value = width;
            document.getElementById(`height-${index}`).value = height;
        });

        function updateOverlay(index) {
            const x = parseInt(document.getElementById(`x-${index}`).value, 10);
            const y = parseInt(document.getElementById(`y-${index}`).value, 10);
            const width = parseInt(document.getElementById(`width-${index}`).value, 10);
            const height = parseInt(document.getElementById(`height-${index}`).value, 10);
            const url = document.getElementById(`url-${index}`).value;

            ipcRenderer.send('update-overlay', { index, x, y, width, height, url });
        }

        function removeOverlay(index) {
            ipcRenderer.send('remove-overlay', index);
        }

        function toggleInteractivity(index, isInteractive) {
            ipcRenderer.send('toggle-interactivity', { index, isInteractive });
        }

        function toggleLanguage() {
            currentLanguage = currentLanguage === "en" ? "pt" : "en";
            updateTranslations();
        }

        function updateOpacity(index, value) {
            const opacity = value / 100;
            ipcRenderer.send('update-opacity', { index, opacity });
        }


        function updateTranslations() {
            const texts = translations[currentLanguage];
            document.getElementById("page-title").innerText = texts.title;
            document.getElementById("create-overlay").innerText = texts.addOverlay;

            const overlays = document.querySelectorAll(".overlay-config");
            overlays.forEach((overlay, index) => {
                overlay.querySelector(`label[for='x-${index}']`).innerText = texts.positionX;
                overlay.querySelector(`label[for='y-${index}']`).innerText = texts.positionY;
                overlay.querySelector(`label[for='width-${index}']`).innerText = texts.width;
                overlay.querySelector(`label[for='height-${index}']`).innerText = texts.height;
                overlay.querySelector(`label[for='url-${index}']`).innerText = texts.url;
                overlay.querySelector(`label[for='opacity-${index}']`).innerText = texts.transparency;
                overlay.querySelector("button").innerText = texts.apply;
                overlay.querySelector(".remove-btn").innerText = texts.remove;
                overlay.querySelector(`label[for='interactive-${index}']`).innerText = texts.interactive;
            });

            document.getElementById("language-toggle").innerText = currentLanguage === "en" ? "PT" : "EN";
        }

        document.addEventListener("DOMContentLoaded", updateTranslations);
    </script>
</body>

</html>